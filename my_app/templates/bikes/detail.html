{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/bikes/bike-detail.css' %}" />
{% endblock %}

{% block content %}
<div class="bike-detail">
  <h1>{{ bike.brand }} {{ bike.model }}</h1>
  <p><strong>Category:</strong> {{ bike.category.name }}</p>
  <p><strong>Description:</strong> {{ bike.description }}</p>
  <a href="{% url 'bike_update' bike.pk %}">Edit Bike</a> |
  <a href="{% url 'bike_delete' bike.pk %}">Delete Bike</a> |
  <a href="{% url 'bike_index' %}">Back to All Bikes</a>
</div>

<div class="maintenance-section">
  <h2>Maintenance Records</h2>
  
  {% if bike.maintenance_set.all %}
    <ul>
      {% for maintenance in bike.maintenance_set.all %}
        <li>
          <strong>Date:</strong> {{ maintenance.date }} - 
          <strong>Type:</strong> {{ maintenance.get_maintenance_type_display }} - 
          <strong>Notes:</strong> {{ maintenance.notes }}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No maintenance records found.</p>
  {% endif %}
</div>

<div class="add-maintenance-form">
  <h3>Add Maintenance</h3>
  <form action="{% url 'add_maintenance' bike.id %}" method="post">
    {% csrf_token %}
    {{ maintenance_form.as_p }}
    <button type="submit" class="btn">Add Maintenance</button>
  </form>
</div>

{% endblock %}
